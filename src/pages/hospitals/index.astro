---
export const prerender = true;
/**
 * MDRPedia — Institutions Listing Page
 * Comprehensive view of hospitals and medical institutions with rankings and filtering
 */
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

// Fetch all doctors to aggregate institution data
const doctors = await getCollection("doctors");

// Types for institution data
interface InstitutionStats {
    name: string;
    slug: string;
    count: number;
    titanCount: number;
    eliteCount: number;
    masterCount: number;
    livesSaved: number;
    surgeries: number;
    impactScore: number;
    countries: Set<string>;
    specialties: Set<string>;
    topDoctors: {
        slug: string;
        name: string;
        tier: string;
        specialty: string;
        portraitUrl?: string;
    }[];
}

// Aggregate data by Institution
const institutionMap = new Map<string, InstitutionStats>();

doctors.forEach((doc) => {
    const d = doc.data;
    if (d.affiliations && d.affiliations.length > 0) {
        d.affiliations.forEach((aff) => {
            const name = aff.hospitalName.trim();
            const slug = name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');

            if (!institutionMap.has(slug)) {
                institutionMap.set(slug, {
                    name,
                    slug,
                    count: 0,
                    titanCount: 0,
                    eliteCount: 0,
                    masterCount: 0,
                    livesSaved: 0,
                    surgeries: 0,
                    impactScore: 0,
                    countries: new Set(),
                    specialties: new Set(),
                    topDoctors: [],
                });
            }

            const stats = institutionMap.get(slug)!;
            stats.count += 1;
            stats.livesSaved += d.livesSaved || 0;
            stats.surgeries += d.verifiedSurgeries || 0;
            stats.impactScore += (d.livesSaved || 0) + (d.verifiedSurgeries || 0) + (d.hIndex || 0);

            // Track tier counts
            if (d.tier === 'TITAN') stats.titanCount++;
            else if (d.tier === 'ELITE') stats.eliteCount++;
            else if (d.tier === 'MASTER') stats.masterCount++;

            // Track countries and specialties
            if (d.geography?.country) stats.countries.add(d.geography.country);
            if (d.specialty) stats.specialties.add(d.specialty);

            // Add to top doctors (limit to 5)
            if (stats.topDoctors.length < 5 && !stats.topDoctors.find((td) => td.slug === doc.id)) {
                stats.topDoctors.push({
                    slug: doc.id,
                    name: d.fullName,
                    tier: d.tier,
                    specialty: d.specialty,
                    portraitUrl: d.portraitUrl,
                });
            }
        });
    }
});

// Convert to array and sort
const institutions = Array.from(institutionMap.values())
    .filter((h) => h.count >= 1)
    .sort((a, b) => {
        // Sort by TITAN count first, then ELITE, then total impact
        if (a.titanCount !== b.titanCount) return b.titanCount - a.titanCount;
        if (a.eliteCount !== b.eliteCount) return b.eliteCount - a.eliteCount;
        return b.impactScore - a.impactScore;
    });

// Get unique countries for filtering
const allCountries = [...new Set(institutions.flatMap(i => [...i.countries]))].sort();

// Stats summary
const totalInstitutions = institutions.length;
const totalDoctors = institutions.reduce((sum, i) => sum + i.count, 0);
const totalLivesSaved = institutions.reduce((sum, i) => sum + i.livesSaved, 0);
const totalSurgeries = institutions.reduce((sum, i) => sum + i.surgeries, 0);

// Tier badge helper
function getTierBadge(tier: string) {
    const badges: Record<string, { class: string; label: string }> = {
        TITAN: { class: 'tier-titan', label: 'TITAN' },
        ELITE: { class: 'tier-elite', label: 'ELITE' },
        MASTER: { class: 'tier-master', label: 'MASTER' },
    };
    return badges[tier] || { class: '', label: '' };
}
---

<Layout title="Top Medical Institutions — MDRPedia" description="Explore leading hospitals and medical institutions ranked by impact, featuring the world's top physicians and surgeons.">
    <div class="institutions-page">
        <!-- Hero Section -->
        <section class="institutions-hero">
            <div class="hero-bg">
                <div class="hero-gradient"></div>
                <div class="hero-grid"></div>
            </div>

            <div class="container">
                <div class="hero-content">
                    <h1>Global Medical Institutions</h1>
                    <p>Tracking the world's leading hospitals and medical centers based on the collective impact of their affiliated physicians and surgeons.</p>
                </div>

                <!-- Stats Bar -->
                <div class="stats-bar">
                    <div class="stat-item">
                        <span class="stat-value">{totalInstitutions.toLocaleString()}</span>
                        <span class="stat-label">Institutions</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-value">{totalDoctors.toLocaleString()}</span>
                        <span class="stat-label">Affiliated Physicians</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-value">{totalLivesSaved.toLocaleString()}</span>
                        <span class="stat-label">Lives Saved</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-value">{totalSurgeries.toLocaleString()}</span>
                        <span class="stat-label">Verified Surgeries</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filters & Search -->
        <section class="filters-section">
            <div class="container">
                <div class="filters-bar">
                    <div class="search-box">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <input
                            type="text"
                            id="institution-search"
                            placeholder="Search institutions..."
                            autocomplete="off"
                        />
                    </div>

                    <div class="filter-group">
                        <select id="country-filter">
                            <option value="">All Countries</option>
                            {allCountries.map((country) => (
                                <option value={country}>{country}</option>
                            ))}
                        </select>
                    </div>

                    <div class="filter-group">
                        <select id="sort-filter">
                            <option value="impact">Sort by Impact</option>
                            <option value="titans">Sort by TITAN Count</option>
                            <option value="doctors">Sort by Doctor Count</option>
                            <option value="name">Sort by Name</option>
                        </select>
                    </div>
                </div>

                <div class="results-info">
                    <span id="results-count">Showing {institutions.length} institutions</span>
                </div>
            </div>
        </section>

        <!-- Institutions Grid -->
        <section class="institutions-list">
            <div class="container">
                <div class="institutions-grid" id="institutions-grid">
                    {institutions.map((institution, index) => (
                        <article
                            class="institution-card"
                            data-name={institution.name.toLowerCase()}
                            data-countries={[...institution.countries].join(',').toLowerCase()}
                            data-impact={institution.impactScore}
                            data-titans={institution.titanCount}
                            data-doctors={institution.count}
                        >
                            <div class="card-header">
                                <div class="rank-badge">
                                    <span class="rank-number">#{index + 1}</span>
                                </div>
                                <div class="institution-info">
                                    <h2 class="institution-name">{institution.name}</h2>
                                    <div class="institution-meta">
                                        {[...institution.countries].slice(0, 2).map((country) => (
                                            <span class="meta-tag location-tag">{country}</span>
                                        ))}
                                        {institution.countries.size > 2 && (
                                            <span class="meta-tag">+{institution.countries.size - 2} more</span>
                                        )}
                                    </div>
                                </div>
                            </div>

                            <div class="card-stats">
                                <div class="stat-box">
                                    <span class="stat-number">{institution.count}</span>
                                    <span class="stat-text">Physicians</span>
                                </div>
                                <div class="stat-box stat-lives">
                                    <span class="stat-number">{institution.livesSaved.toLocaleString()}</span>
                                    <span class="stat-text">Lives Saved</span>
                                </div>
                                <div class="stat-box stat-impact">
                                    <span class="stat-number">{institution.impactScore.toLocaleString()}</span>
                                    <span class="stat-text">Impact Score</span>
                                </div>
                            </div>

                            {/* Tier Distribution */}
                            <div class="tier-distribution">
                                {institution.titanCount > 0 && (
                                    <div class="tier-count tier-titan">
                                        <span class="tier-icon">
                                            <svg viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5ZM19 19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V18H19V19Z"/>
                                            </svg>
                                        </span>
                                        <span class="tier-num">{institution.titanCount}</span>
                                        <span class="tier-label">TITAN</span>
                                    </div>
                                )}
                                {institution.eliteCount > 0 && (
                                    <div class="tier-count tier-elite">
                                        <span class="tier-icon">
                                            <svg viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                                            </svg>
                                        </span>
                                        <span class="tier-num">{institution.eliteCount}</span>
                                        <span class="tier-label">ELITE</span>
                                    </div>
                                )}
                                {institution.masterCount > 0 && (
                                    <div class="tier-count tier-master">
                                        <span class="tier-icon">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                                <polyline points="22 4 12 14.01 9 11.01"/>
                                            </svg>
                                        </span>
                                        <span class="tier-num">{institution.masterCount}</span>
                                        <span class="tier-label">MASTER</span>
                                    </div>
                                )}
                            </div>

                            {/* Top Doctors Preview */}
                            {institution.topDoctors.length > 0 && (
                                <div class="top-doctors">
                                    <span class="doctors-label">Top Physicians</span>
                                    <div class="doctors-list">
                                        {institution.topDoctors.slice(0, 3).map((doctor) => (
                                            <a href={`/doctor/${doctor.slug}`} class="doctor-preview" title={doctor.name}>
                                                <div class="doctor-avatar">
                                                    {doctor.portraitUrl ? (
                                                        <img src={doctor.portraitUrl} alt={doctor.name} loading="lazy" />
                                                    ) : (
                                                        <span class="avatar-initial">{doctor.name.charAt(0)}</span>
                                                    )}
                                                    <span class={`tier-dot ${getTierBadge(doctor.tier).class}`}></span>
                                                </div>
                                            </a>
                                        ))}
                                        {institution.topDoctors.length > 3 && (
                                            <span class="more-doctors">+{institution.topDoctors.length - 3}</span>
                                        )}
                                    </div>
                                </div>
                            )}

                        </article>
                    ))}
                </div>

                {institutions.length === 0 && (
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0H5m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                        </svg>
                        <h3>No institutions found</h3>
                        <p>Try adjusting your filters or search terms.</p>
                    </div>
                )}
            </div>
        </section>
    </div>
</Layout>

<script>
    // Filter and search functionality
    document.addEventListener('DOMContentLoaded', () => {
        const searchInput = document.getElementById('institution-search') as HTMLInputElement;
        const countryFilter = document.getElementById('country-filter') as HTMLSelectElement;
        const sortFilter = document.getElementById('sort-filter') as HTMLSelectElement;
        const resultsCount = document.getElementById('results-count');
        const grid = document.getElementById('institutions-grid');

        if (!grid) return;

        function filterAndSort() {
            const searchTerm = searchInput?.value.toLowerCase() || '';
            const country = countryFilter?.value.toLowerCase() || '';
            const sortBy = sortFilter?.value || 'impact';

            const cards = Array.from(grid!.querySelectorAll('.institution-card')) as HTMLElement[];
            let visibleCount = 0;

            // Filter
            cards.forEach(card => {
                const name = card.dataset.name || '';
                const countries = card.dataset.countries || '';

                const matchesSearch = !searchTerm || name.includes(searchTerm);
                const matchesCountry = !country || countries.includes(country);

                if (matchesSearch && matchesCountry) {
                    card.style.display = '';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            // Sort visible cards
            const visibleCards = cards.filter(card => card.style.display !== 'none');
            visibleCards.sort((a, b) => {
                switch (sortBy) {
                    case 'titans':
                        return parseInt(b.dataset.titans || '0') - parseInt(a.dataset.titans || '0');
                    case 'doctors':
                        return parseInt(b.dataset.doctors || '0') - parseInt(a.dataset.doctors || '0');
                    case 'name':
                        return (a.dataset.name || '').localeCompare(b.dataset.name || '');
                    default: // impact
                        return parseInt(b.dataset.impact || '0') - parseInt(a.dataset.impact || '0');
                }
            });

            // Re-append in sorted order
            visibleCards.forEach(card => grid!.appendChild(card));

            // Update rank badges
            visibleCards.forEach((card, index) => {
                const rankBadge = card.querySelector('.rank-number');
                if (rankBadge) rankBadge.textContent = `#${index + 1}`;
            });

            // Update results count
            if (resultsCount) {
                resultsCount.textContent = `Showing ${visibleCount} institution${visibleCount !== 1 ? 's' : ''}`;
            }
        }

        searchInput?.addEventListener('input', filterAndSort);
        countryFilter?.addEventListener('change', filterAndSort);
        sortFilter?.addEventListener('change', filterAndSort);
    });
</script>

<style>
    /* ─── Page Layout ───────────────────────────────────────────────────────── */

    .institutions-page {
        min-height: 100vh;
        padding-bottom: 80px;
    }

    /* ─── Hero Section ──────────────────────────────────────────────────────── */

    .institutions-hero {
        position: relative;
        padding: 140px 0 60px;
        overflow: hidden;
    }

    .hero-bg {
        position: absolute;
        inset: 0;
        pointer-events: none;
    }

    .hero-gradient {
        position: absolute;
        top: -200px;
        left: 50%;
        transform: translateX(-50%);
        width: 1200px;
        height: 600px;
        background: radial-gradient(ellipse, rgba(59, 130, 246, 0.12) 0%, transparent 70%);
        filter: blur(60px);
    }

    .hero-grid {
        position: absolute;
        inset: 0;
        background-image:
            linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
        background-size: 60px 60px;
        mask-image: linear-gradient(to bottom, transparent, black 20%, black 80%, transparent);
    }

    .hero-content {
        text-align: center;
        max-width: 700px;
        margin: 0 auto 48px;
        position: relative;
    }

    .hero-content h1 {
        font-size: clamp(2rem, 5vw, 3rem);
        font-weight: 800;
        color: var(--text-primary);
        margin-bottom: 16px;
    }

    .hero-content p {
        font-size: 1.1rem;
        color: var(--text-secondary);
        line-height: 1.6;
    }

    /* Stats Bar */
    .stats-bar {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 40px;
        padding: 28px 40px;
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 16px;
        max-width: 900px;
        margin: 0 auto;
    }

    .stat-item {
        text-align: center;
    }

    .stat-value {
        display: block;
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--text-primary);
        font-family: var(--font-mono);
        line-height: 1;
    }

    .stat-label {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-top: 4px;
    }

    .stat-divider {
        width: 1px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
    }

    /* ─── Filters Section ───────────────────────────────────────────────────── */

    .filters-section {
        padding: 32px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }

    .filters-bar {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        align-items: center;
    }

    .search-box {
        flex: 1;
        min-width: 280px;
        position: relative;
    }

    .search-box svg {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        color: var(--text-muted);
    }

    .search-box input {
        width: 100%;
        padding: 14px 16px 14px 48px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        color: var(--text-primary);
        font-size: 0.95rem;
        transition: all 0.2s;
    }

    .search-box input:focus {
        outline: none;
        border-color: var(--accent-blue);
        background: rgba(255, 255, 255, 0.05);
    }

    .search-box input::placeholder {
        color: var(--text-muted);
    }

    .filter-group select {
        padding: 14px 40px 14px 16px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        color: var(--text-primary);
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.2s;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23666688' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 12px center;
    }

    .filter-group select:focus {
        outline: none;
        border-color: var(--accent-blue);
    }

    .filter-group select option {
        background: var(--bg-card);
        color: var(--text-primary);
    }

    .results-info {
        margin-top: 16px;
        font-size: 0.9rem;
        color: var(--text-muted);
    }

    /* ─── Institutions Grid ─────────────────────────────────────────────────── */

    .institutions-list {
        padding: 48px 0;
    }

    .institutions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
        gap: 24px;
    }

    .institution-card {
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 20px;
        padding: 24px;
        transition: all 0.3s ease;
    }

    .institution-card:hover {
        background: rgba(255, 255, 255, 0.04);
        border-color: rgba(59, 130, 246, 0.3);
        transform: translateY(-4px);
    }

    .card-header {
        display: flex;
        align-items: flex-start;
        gap: 16px;
        margin-bottom: 20px;
    }

    .rank-badge {
        flex-shrink: 0;
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-purple) 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .rank-number {
        font-size: 1rem;
        font-weight: 700;
        color: white;
        font-family: var(--font-mono);
    }

    .institution-info {
        flex: 1;
        min-width: 0;
    }

    .institution-name {
        font-size: 1.15rem;
        font-weight: 600;
        color: var(--text-primary);
        line-height: 1.3;
        margin-bottom: 8px;
        font-family: var(--font-sans);
    }

    .institution-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
    }

    .meta-tag {
        padding: 3px 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
        font-size: 0.75rem;
        color: var(--text-muted);
    }

    .location-tag {
        color: var(--accent-blue);
        background: rgba(59, 130, 246, 0.1);
    }

    /* Card Stats */
    .card-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        margin-bottom: 20px;
    }

    .stat-box {
        text-align: center;
        padding: 12px 8px;
        background: rgba(255, 255, 255, 0.02);
        border-radius: 10px;
    }

    .stat-number {
        display: block;
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--text-primary);
        font-family: var(--font-mono);
        line-height: 1;
    }

    .stat-text {
        font-size: 0.65rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-top: 4px;
    }

    .stat-lives .stat-number { color: #10b981; }
    .stat-impact .stat-number { color: var(--accent-purple); }

    /* Tier Distribution */
    .tier-distribution {
        display: flex;
        gap: 12px;
        margin-bottom: 16px;
        flex-wrap: wrap;
    }

    .tier-count {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 8px;
        font-size: 0.8rem;
    }

    .tier-count .tier-icon {
        display: flex;
        align-items: center;
    }

    .tier-count .tier-icon svg {
        width: 14px;
        height: 14px;
    }

    .tier-count .tier-num {
        font-weight: 700;
        font-family: var(--font-mono);
    }

    .tier-count .tier-label {
        font-size: 0.65rem;
        font-weight: 600;
        letter-spacing: 0.05em;
    }

    .tier-count.tier-titan {
        background: rgba(255, 215, 0, 0.1);
        color: #FFD700;
    }

    .tier-count.tier-elite {
        background: rgba(0, 170, 255, 0.1);
        color: #00aaff;
    }

    .tier-count.tier-master {
        background: rgba(0, 204, 102, 0.1);
        color: #00cc66;
    }

    /* Top Doctors */
    .top-doctors {
        margin-bottom: 16px;
    }

    .doctors-label {
        display: block;
        font-size: 0.7rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 8px;
    }

    .doctors-list {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .doctor-preview {
        position: relative;
        display: block;
    }

    .doctor-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        overflow: hidden;
        background: var(--bg-elevated);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border: 2px solid transparent;
        transition: border-color 0.2s;
    }

    .doctor-preview:hover .doctor-avatar {
        border-color: var(--accent-blue);
    }

    .doctor-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .avatar-initial {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-muted);
    }

    .tier-dot {
        position: absolute;
        bottom: 0;
        right: 0;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        border: 2px solid var(--bg-card);
    }

    .tier-dot.tier-titan { background: #FFD700; }
    .tier-dot.tier-elite { background: #00aaff; }
    .tier-dot.tier-master { background: #00cc66; }

    .more-doctors {
        font-size: 0.8rem;
        color: var(--text-muted);
        padding-left: 4px;
    }

    /* Empty State */
    .empty-state {
        text-align: center;
        padding: 80px 20px;
    }

    .empty-state svg {
        width: 64px;
        height: 64px;
        color: var(--text-muted);
        margin-bottom: 20px;
    }

    .empty-state h3 {
        font-size: 1.25rem;
        color: var(--text-primary);
        margin-bottom: 8px;
        font-family: var(--font-sans);
    }

    .empty-state p {
        color: var(--text-muted);
    }

    /* ─── Responsive ────────────────────────────────────────────────────────── */

    @media (max-width: 768px) {
        .institutions-hero {
            padding: 120px 0 40px;
        }

        .stats-bar {
            flex-direction: column;
            gap: 20px;
            padding: 24px;
        }

        .stat-divider {
            width: 60px;
            height: 1px;
        }

        .filters-bar {
            flex-direction: column;
        }

        .search-box {
            width: 100%;
            min-width: 100%;
        }

        .filter-group {
            width: 100%;
        }

        .filter-group select {
            width: 100%;
        }

        .institutions-grid {
            grid-template-columns: 1fr;
        }

        .card-stats {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 480px) {
        .hero-content h1 {
            font-size: 1.75rem;
        }

        .institution-card {
            padding: 20px;
        }

        .card-header {
            flex-direction: column;
            align-items: flex-start;
        }
    }
</style>
